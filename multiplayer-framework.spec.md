# Multiplayer Game Builder Platform

> Web-based visual builder for multiplayer games, powered by `statesync`

## 1. Vision

A **no-code/low-code platform** where game developers can:

1. **Design state schemas** visually (drag & drop fields, set types)
2. **Configure visibility filters** with a visual editor + optional code
3. **Write game logic** in an integrated Go code editor
4. **Build & Deploy** with one click (generates Go project, compiles in Docker)
5. **Download or Host** the compiled binary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         WEB BUILDER INTERFACE                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Schema Editor  â”‚  â”‚  Filter Editor  â”‚  â”‚     Game Logic Editor       â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                             â”‚  â”‚
â”‚  â”‚  [Player]       â”‚  â”‚  â—‹ Public       â”‚  â”‚  func OnPlayCard(ctx, cmd)  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ID: string  â”‚  â”‚  â—‹ Self only    â”‚  â”‚  {                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ Name: stringâ”‚  â”‚  â—‹ Team         â”‚  â”‚    player := ctx.Player()   â”‚  â”‚
â”‚  â”‚  â”œâ”€ Hand: []Cardâ”‚  â”‚  â—‹ Custom...    â”‚  â”‚    card := cmd.CardID       â”‚  â”‚
â”‚  â”‚  â””â”€ Score: int  â”‚  â”‚                 â”‚  â”‚    ...                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [BUILD]                                              [DOWNLOAD] [RUN] â”‚   â”‚
â”‚  â”‚  âœ“ Schema validation passed                                           â”‚   â”‚
â”‚  â”‚  âœ“ Filters compiled                                                   â”‚   â”‚
â”‚  â”‚  âœ“ Game logic compiled                                                â”‚   â”‚
â”‚  â”‚  âœ“ Binary ready: game-server (linux-amd64, 12MB)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Architecture

### 2.1 Platform Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BUILDER PLATFORM                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Web Frontend (React/Vue)                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ Schema   â”‚  â”‚ Filter   â”‚  â”‚  Logic   â”‚  â”‚     Build        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Designer â”‚  â”‚ Builder  â”‚  â”‚  Editor  â”‚  â”‚   Dashboard      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                       Backend API (Go)                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ Project  â”‚  â”‚   Code   â”‚  â”‚   Build  â”‚  â”‚     Artifact     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Manager  â”‚  â”‚Generator â”‚  â”‚  Service â”‚  â”‚     Storage      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Docker Build Sandbox                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Isolated container per build:                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - No network access                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Resource limits (CPU, memory, time)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Read-only except /workspace                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Pre-installed Go + statesync                               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Build Pipeline

```
User Input                Code Generation              Build                Output
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Schema JSON  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ trackgen     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚    â”‚          â”‚
â”‚              â”‚         â”‚ schemagen    â”‚         â”‚              â”‚    â”‚  Binary  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚              â”‚    â”‚  (Linux) â”‚
                                                  â”‚    Docker    â”‚â”€â”€â”€â–¶â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    Build     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Filter Rules â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ filter_gen.goâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚           â”‚
â”‚              â”‚         â”‚              â”‚         â”‚              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚              â”‚    â”‚  Binary  â”‚
                                                  â”‚              â”‚â”€â”€â”€â–¶â”‚ (Windows)â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Game Logic   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ handlers.go  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚           â”‚
â”‚ (Go code)    â”‚         â”‚              â”‚         â”‚              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Binary  â”‚
                                                                  â”€â”€â”€â–¶â”‚  (Mac)   â”‚
                                â–²                        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                         â”‚ Compile      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Errors       â”‚
                         â”‚ (returned)   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Web Interface Components

### 3.1 Schema Designer (Visual)

Drag-and-drop interface for defining game state structures.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCHEMA DESIGNER                                              [+ Add Type]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ GameState                        â”‚  â”‚ Player                      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [+] Round     int64              â”‚  â”‚ [+] ID        string  [key] â”‚   â”‚
â”‚  â”‚ [+] Phase     string             â”‚  â”‚ [+] Name      string        â”‚   â”‚
â”‚  â”‚ [+] Players   []Player    [â–¶]   â”‚  â”‚ [+] Hand      []Card  [ğŸ”’]  â”‚   â”‚
â”‚  â”‚ [+] Deck      []Card      [ğŸ”’]   â”‚  â”‚ [+] Score     int           â”‚   â”‚
â”‚  â”‚ [+] Discard   []Card             â”‚  â”‚ [+] Team      string  [team]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ [+] Ready     bool          â”‚   â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  â”‚ Card                             â”‚  Visibility Icons:                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  ğŸ‘  Public (everyone)              â”‚
â”‚  â”‚ [+] ID        string             â”‚  ğŸ”’ Self only                      â”‚
â”‚  â”‚ [+] Suit      string             â”‚  ğŸ‘¥ Team only                       â”‚
â”‚  â”‚ [+] Value     int                â”‚  ğŸš« Private (server only)          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                          â”‚
â”‚  Field Properties (selected: Hand)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Name: [Hand        ]  Type: [[]Card    â–¼]  Track ID: [3]            â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚ Visibility: â—‹ Public  â— Self only  â—‹ Team  â—‹ Private  â—‹ Custom     â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚ â–¡ Is array key field (for keyed arrays)                             â”‚ â”‚
â”‚  â”‚ â–¡ Is identity field (for "self" visibility)                         â”‚ â”‚
â”‚  â”‚ â–¡ Is team key field (for "team" visibility)                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Output:** JSON schema definition that maps to Go struct tags:

```json
{
  "types": [
    {
      "name": "Player",
      "fields": [
        {"name": "ID", "type": "string", "trackID": 0, "identity": true},
        {"name": "Name", "type": "string", "trackID": 1},
        {"name": "Hand", "type": "[]Card", "trackID": 2, "visibility": "self"},
        {"name": "Score", "type": "int64", "trackID": 3},
        {"name": "Team", "type": "string", "trackID": 4, "teamKey": true}
      ]
    }
  ]
}
```

### 3.2 Filter Builder

Two modes: **Visual** for common patterns, **Code** for complex logic.

#### Visual Mode (No Code Required)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTER RULES                                                [Code Mode]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Player.Hand                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Who can see this field?                                              â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚ â— Only the player themselves (self)                                  â”‚â”‚
â”‚  â”‚ â—‹ Players on the same team (team)                                    â”‚â”‚
â”‚  â”‚ â—‹ Everyone (public)                                                  â”‚â”‚
â”‚  â”‚ â—‹ No one (server only)                                               â”‚â”‚
â”‚  â”‚ â—‹ Custom condition...                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  GameState.Deck                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Who can see this field?                                              â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚ â—‹ Only the player themselves (self)                                  â”‚â”‚
â”‚  â”‚ â—‹ Players on the same team (team)                                    â”‚â”‚
â”‚  â”‚ â—‹ Everyone (public)                                                  â”‚â”‚
â”‚  â”‚ â— No one (server only)                                               â”‚â”‚
â”‚  â”‚ â—‹ Custom condition...                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  [+ Add Custom Filter Rule]                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Code Mode (For Complex Filters)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CUSTOM FILTERS                                            [Visual Mode] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  // Custom filter: Show nearby players only (GPS game)                   â”‚
â”‚  // This function is called for each Player when sending to a client    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ func FilterPlayer(viewer *Player, target *Player) *Player {          â”‚â”‚
â”‚  â”‚     // Always see yourself                                           â”‚â”‚
â”‚  â”‚     if viewer.ID == target.ID {                                      â”‚â”‚
â”‚  â”‚         return target                                                â”‚â”‚
â”‚  â”‚     }                                                                â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚     // Check distance                                                â”‚â”‚
â”‚  â”‚     dist := Distance(viewer.Location, target.Location)              â”‚â”‚
â”‚  â”‚     if dist > 100 { // More than 100 meters away                    â”‚â”‚
â”‚  â”‚         // Return player with hidden location                       â”‚â”‚
â”‚  â”‚         hidden := *target                                           â”‚â”‚
â”‚  â”‚         hidden.Location = nil                                       â”‚â”‚
â”‚  â”‚         return &hidden                                              â”‚â”‚
â”‚  â”‚     }                                                                â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚     return target                                                    â”‚â”‚
â”‚  â”‚ }                                                                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€ Errors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ“ No errors                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  Available helpers:                                                      â”‚
â”‚  â€¢ Distance(a, b Location) float64                                       â”‚
â”‚  â€¢ SameTeam(a, b *Player) bool                                          â”‚
â”‚  â€¢ IsOnline(p *Player) bool                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Game Logic Editor

Full Go code editor with **live linting** and **autocomplete**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GAME LOGIC                                    [Docs] [Format] [Validate]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Commands   â”‚  Code Editor                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚PlayCard â”‚ â”‚ â”‚ // PlayCard - When a player plays a card from hand    â”‚ â”‚
â”‚ â”‚DrawCard â”‚ â”‚ â”‚ func (h *Handlers) PlayCard(ctx *Context, cmd PlayCardCmd) error {â”‚ â”‚
â”‚ â”‚Pass     â”‚ â”‚ â”‚     player := ctx.GetPlayer()                          â”‚ â”‚
â”‚ â”‚StartGameâ”‚ â”‚ â”‚     game := ctx.GetState()                             â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ â”‚                                                        â”‚ â”‚
â”‚ â”‚[+] New  â”‚ â”‚ â”‚     // Validate it's player's turn                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚     if game.CurrentPlayer != player.ID {               â”‚ â”‚
â”‚             â”‚ â”‚         return errors.New("not your turn")             â”‚ â”‚
â”‚  Effects    â”‚ â”‚     }                                                   â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚                                                        â”‚ â”‚
â”‚ â”‚SpeedBuffâ”‚ â”‚ â”‚     // Find card in hand                               â”‚ â”‚
â”‚ â”‚Shield   â”‚ â”‚ â”‚     cardIdx := -1                                      â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ â”‚     for i, c := range player.Hand {                    â”‚ â”‚
â”‚ â”‚[+] New  â”‚ â”‚ â”‚         if c.ID == cmd.CardID {                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚             cardIdx = i                                 â”‚ â”‚
â”‚             â”‚ â”‚             break                                       â”‚ â”‚
â”‚  Events     â”‚ â”‚         }                                               â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚     }                                                   â”‚ â”‚
â”‚ â”‚GameStartâ”‚ â”‚ â”‚     if cardIdx == -1 {                                 â”‚ â”‚
â”‚ â”‚GameEnd  â”‚ â”‚ â”‚         return errors.New("card not in hand")          â”‚ â”‚
â”‚ â”‚TurnStartâ”‚ â”‚ â”‚     }â–ˆ                                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚                                                        â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Problems (0)  â”‚  Output                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ“ All checks passed                                                  â”‚ â”‚
â”‚ â”‚                                                                      â”‚ â”‚
â”‚ â”‚ Autocomplete suggestions:                                            â”‚ â”‚
â”‚ â”‚   ctx.GetPlayer()    - Get current player                           â”‚ â”‚
â”‚ â”‚   ctx.GetState()     - Get game state                               â”‚ â”‚
â”‚ â”‚   ctx.Emit(event)    - Emit event to clients                        â”‚ â”‚
â”‚ â”‚   ctx.Broadcast()    - Broadcast state changes                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Build Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BUILD & DEPLOY                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Project: "Card Game Server"                    Last build: 2 min ago    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€ Build Targets â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â˜‘ Linux (amd64)                                                      â”‚â”‚
â”‚  â”‚ â˜‘ Windows (amd64)                                                    â”‚â”‚
â”‚  â”‚ â˜ macOS (arm64)                                                      â”‚â”‚
â”‚  â”‚ â˜ Docker image                                                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€ Build Log â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [12:34:56] Generating schema code...                                 â”‚â”‚
â”‚  â”‚ [12:34:56] Generating tracking code...                               â”‚â”‚
â”‚  â”‚ [12:34:57] Generating filter code...                                 â”‚â”‚
â”‚  â”‚ [12:34:57] Compiling handlers...                                     â”‚â”‚
â”‚  â”‚ [12:34:58] Building linux-amd64...                                   â”‚â”‚
â”‚  â”‚ [12:35:02] Building windows-amd64...                                 â”‚â”‚
â”‚  â”‚ [12:35:06] âœ“ Build successful!                                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€ Artifacts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚  ğŸ“¦ card-game-server-linux-amd64      12.4 MB    [Download]         â”‚â”‚
â”‚  â”‚  ğŸ“¦ card-game-server-windows-amd64.exe 12.8 MB    [Download]         â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚  [Deploy to Cloud â–¼]  [Generate Docker Compose]  [View Source]      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚                              [ ğŸ”¨ BUILD ]                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Code Generation

### 4.1 From Schema to Go

**Input (JSON from visual editor):**
```json
{
  "name": "Player",
  "fields": [
    {"name": "ID", "type": "string", "trackID": 0, "identity": true},
    {"name": "Hand", "type": "[]Card", "trackID": 1, "visibility": "self"}
  ]
}
```

**Output (Generated Go):**
```go
type Player struct {
    ID   string `track:"0" identity:"true"`
    Hand []Card `track:"1" visible:"self"`
}

// Generated by trackgen
func (p *Player) FilterFor(ctx *PlayerVisibilityCtx) Player { ... }
```

### 4.2 Generated Project Structure

```
generated-project/
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ main.go                 # Server entry point
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ game_state.go       # User-defined types (from schema)
â”‚   â”œâ”€â”€ schema_gen.go       # Generated schema code
â”‚   â”œâ”€â”€ tracking_gen.go     # Generated tracking code
â”‚   â””â”€â”€ filter_gen.go       # Generated filter code
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ play_card.go        # User-written handler (from editor)
â”‚   â”œâ”€â”€ draw_card.go
â”‚   â””â”€â”€ start_game.go
â”œâ”€â”€ effects/
â”‚   â””â”€â”€ speed_buff.go       # User-defined effects
â””â”€â”€ config/
    â””â”€â”€ room_config.go      # Room configuration
```

### 4.3 Main Server Template

```go
// main.go (generated)
package main

import (
    "log"
    "github.com/mxkacsa/statesync"
    "github.com/mxkacsa/multiplayer/server"
    "card-game/types"
    "card-game/handlers"
)

func main() {
    // Create initial state
    state := types.NewGameState()

    // Create tracked session with hooks
    ts := statesync.NewTrackedState[*types.GameState, string](state, nil)
    session := statesync.NewTrackedSession[*types.GameState, string, string](ts)

    // Configure hooks for logging/debugging
    session.SetHooks(statesync.SessionHooks[*types.GameState, string]{
        OnAfterBroadcast: func(diffs map[string][]byte, seq uint64) {
            log.Printf("Broadcast seq %d to %d clients", seq, len(diffs))
        },
    })

    // Create server
    srv := server.New(server.Config{
        Port:         8080,
        Session:      session,
    })

    // Register handlers (from user code)
    srv.RegisterHandler("play-card", handlers.PlayCard)
    srv.RegisterHandler("draw-card", handlers.DrawCard)
    srv.RegisterHandler("start-game", handlers.StartGame)

    log.Println("Starting server on :8080")
    log.Fatal(srv.Run())
}
```

---

## 5. Live Validation & Linting

### 5.1 Frontend Linting (Monaco Editor + gopls)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  The editor uses Monaco (VS Code's editor) with Go language support:    â”‚
â”‚                                                                          â”‚
â”‚  â€¢ Real-time syntax highlighting                                         â”‚
â”‚  â€¢ Autocomplete for ctx.*, game state fields, helper functions          â”‚
â”‚  â€¢ Inline error markers (red squiggles)                                 â”‚
â”‚  â€¢ Hover documentation                                                   â”‚
â”‚  â€¢ Go to definition (within project)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation approach:**

1. **WebSocket to lint server** - User types code, debounced sends to backend
2. **Backend runs gopls** - Standard Go language server
3. **Diagnostics returned** - Errors, warnings displayed inline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Monaco    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Backend   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   gopls     â”‚
â”‚   Editor    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   (Go)      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (LSP)      â”‚
â”‚             â”‚  JSON   â”‚             â”‚  JSON   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     User types           Sends to lint          Returns errors
```

### 5.2 Pre-Build Validation

Before Docker build starts:

```go
type ValidationResult struct {
    Valid    bool
    Errors   []ValidationError
    Warnings []ValidationWarning
}

type ValidationError struct {
    File     string  // "handlers/play_card.go"
    Line     int     // 23
    Column   int     // 15
    Message  string  // "undefined: ctx.GetPlayers"
    Code     string  // "undeclared_name"
}
```

**Response to frontend:**

```json
{
  "valid": false,
  "errors": [
    {
      "file": "handlers/play_card.go",
      "line": 23,
      "column": 15,
      "message": "undefined: ctx.GetPlayers (did you mean ctx.GetPlayer?)",
      "code": "undeclared_name"
    }
  ],
  "warnings": []
}
```

---

## 6. Docker Build Sandbox

### 6.1 Security Requirements

```yaml
# docker-compose.build.yml
services:
  builder:
    image: golang:1.22-alpine
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    networks:
      - none                    # No network access!
    read_only: true
    tmpfs:
      - /tmp:size=100M
    volumes:
      - ./workspace:/workspace:rw   # Only writable location
      - ./cache:/go/pkg:ro          # Read-only module cache
    resources:
      limits:
        cpus: '2'
        memory: 2G
    timeout: 300s               # 5 min max build time
```

### 6.2 Build Process

```bash
#!/bin/bash
# build.sh (runs inside container)

set -e

cd /workspace

# 1. Generate code
go run github.com/mxkacsa/statesync/cmd/schemagen -type=GameState -output=types/schema_gen.go
go run github.com/mxkacsa/statesync/cmd/trackgen -type=GameState,Player,Card -output=types/tracking_gen.go

# 2. Verify compilation
go build ./...

# 3. Build binaries
GOOS=linux GOARCH=amd64 go build -o /workspace/out/server-linux-amd64 .
GOOS=windows GOARCH=amd64 go build -o /workspace/out/server-windows-amd64.exe .

# 4. Report success
echo '{"success": true, "artifacts": ["server-linux-amd64", "server-windows-amd64.exe"]}'
```

### 6.3 Error Handling

```json
// Build failure response
{
  "success": false,
  "phase": "compile",
  "errors": [
    {
      "file": "handlers/play_card.go",
      "line": 45,
      "message": "cannot use card (variable of type Card) as *Card value"
    }
  ],
  "log": "... full build log ..."
}
```

---

## 7. Alternative Approaches for Filters

### 7.1 Option A: Pure Visual (Recommended for Simple Games)

**Pros:**
- No code knowledge required
- Impossible to write insecure code
- Fast to configure

**Cons:**
- Limited flexibility
- Can't handle complex logic

**Best for:** Card games, board games, simple multiplayer

### 7.2 Option B: Expression Language (e.g., CEL)

```
// Google's Common Expression Language
// Safe, sandboxed expressions

// Show hand only to self
field: "Hand"
condition: viewer.ID == target.ID

// Show location only if within 100m
field: "Location"
condition: distance(viewer.Location, target.Location) < 100

// Show to team members
field: "Strategy"
condition: viewer.Team == target.Team
```

**Pros:**
- Safe (no arbitrary code execution)
- Powerful enough for most cases
- Fast to evaluate

**Cons:**
- Learning curve
- Limited to expressions (no statements)

**Best for:** Medium complexity games

### 7.3 Option C: Go Code (Current Approach)

```go
func FilterPlayer(viewer, target *Player) *Player {
    // Full Go power
    if complexCondition(viewer, target) {
        return modifiedTarget
    }
    return target
}
```

**Pros:**
- Maximum flexibility
- Familiar to Go developers
- Can handle any logic

**Cons:**
- Requires Go knowledge
- Security risk (sandboxed execution required)
- Slower build iteration

**Best for:** Complex games, GPS games, real-time games

### 7.4 Recommendation: Hybrid Approach

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTER CONFIGURATION                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Player.Hand                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â— Simple: Self only                                                  â”‚â”‚
â”‚  â”‚ â—‹ Expression: [                                               ]      â”‚â”‚
â”‚  â”‚ â—‹ Custom Go code                                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  Player.Location (GPS game)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â—‹ Simple: Public                                                     â”‚â”‚
â”‚  â”‚ â— Expression: [distance(viewer.Loc, target.Loc) < 100        ]      â”‚â”‚
â”‚  â”‚ â—‹ Custom Go code                                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  GameState.SecretObjective (complex visibility)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â—‹ Simple: Self only                                                  â”‚â”‚
â”‚  â”‚ â—‹ Expression: (not expressive enough)                                â”‚â”‚
â”‚  â”‚ â— Custom Go code â–¼                                                   â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ func FilterSecretObjective(ctx *FilterCtx) bool {               â”‚ â”‚â”‚
â”‚  â”‚ â”‚     // Show if player has "reveal" power-up                     â”‚ â”‚â”‚
â”‚  â”‚ â”‚     viewer := ctx.Viewer                                        â”‚ â”‚â”‚
â”‚  â”‚ â”‚     for _, item := range viewer.Inventory {                     â”‚ â”‚â”‚
â”‚  â”‚ â”‚         if item.Type == "reveal" {                              â”‚ â”‚â”‚
â”‚  â”‚ â”‚             return true                                         â”‚ â”‚â”‚
â”‚  â”‚ â”‚         }                                                       â”‚ â”‚â”‚
â”‚  â”‚ â”‚     }                                                           â”‚ â”‚â”‚
â”‚  â”‚ â”‚     return false                                                â”‚ â”‚â”‚
â”‚  â”‚ â”‚ }                                                               â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Game Logic Sandbox

For custom Go code (filters & handlers), we need secure execution:

### 8.1 Approach: Compilation-Only (Recommended)

User code is compiled into the binary, not interpreted at runtime.

**Security model:**
- Code is reviewed at compile time
- No `unsafe`, `os/exec`, `net` imports allowed
- Static analysis before build

```go
// Blocked imports (checked before build)
var blockedImports = []string{
    "os/exec",
    "net",
    "net/http",
    "syscall",
    "unsafe",
    "plugin",
    "runtime/debug",
}
```

### 8.2 Allowed Standard Library

```go
// Safe imports for game logic
var allowedImports = []string{
    "errors",
    "fmt",
    "math",
    "math/rand",
    "sort",
    "strings",
    "time",
    // Plus the game framework packages
    "github.com/mxkacsa/statesync",
    "game/types",
    "game/helpers",
}
```

### 8.3 Pre-Build Static Analysis

```go
// Run before Docker build
func AnalyzeUserCode(files []string) ([]SecurityIssue, error) {
    var issues []SecurityIssue

    for _, file := range files {
        fset := token.NewFileSet()
        f, _ := parser.ParseFile(fset, file, nil, parser.ImportsOnly)

        for _, imp := range f.Imports {
            path := strings.Trim(imp.Path.Value, `"`)
            if isBlocked(path) {
                issues = append(issues, SecurityIssue{
                    File:    file,
                    Line:    fset.Position(imp.Pos()).Line,
                    Message: fmt.Sprintf("import %q is not allowed", path),
                })
            }
        }
    }

    return issues, nil
}
```

---

## 9. Statesync Integration Points

### 9.1 Current Features Used

| Feature | Usage |
|---------|-------|
| `TrackedSession` | Multi-client binary state sync |
| `FilterFunc` | Per-client state filtering |
| `SessionHooks` | Logging, debugging, metrics |
| `trackgen` | Code generation for schemas |
| Visibility tags | `visible:"self"`, `visible:"team"` |
| Effects system | Temporary state modifications |
| Reconnection | History buffer for seamless reconnect |
| Debounce | Batch rapid updates |

### 9.2 Generated Code Uses trackgen

The visual schema editor generates JSON that is converted to Go structs with trackgen tags:

```go
// Generated from visual editor
type Player struct {
    ID       string   `track:"0" identity:"true"`
    Name     string   `track:"1"`
    Hand     []Card   `track:"2" visible:"self"`
    Score    int64    `track:"3"`
    Team     string   `track:"4" teamKey:"true"`
    Location *GeoPoint `track:"5" visible:"team"`
}

// trackgen generates:
// - NewPlayer()
// - PlayerVisibilityCtx
// - (*Player).FilterFor(ctx)
// - FilterPlayerSliceFor(items, ctx)
```

---

## 10. MVP Roadmap

### Phase 1: Schema Designer (2 weeks)
- [ ] React/Vue frontend with drag-drop schema builder
- [ ] JSON schema export
- [ ] Go code generator from JSON
- [ ] Basic field types (primitives, arrays, maps)

### Phase 2: Filter Builder (2 weeks)
- [ ] Visual filter mode (self/team/public/private)
- [ ] Integration with trackgen visibility tags
- [ ] Preview filtered state for each player

### Phase 3: Code Editor (2 weeks)
- [ ] Monaco editor integration
- [ ] gopls WebSocket bridge for live linting
- [ ] Autocomplete for game types
- [ ] Handler template generation

### Phase 4: Build Pipeline (2 weeks)
- [ ] Docker sandbox setup
- [ ] Code generation pipeline
- [ ] Build artifact storage
- [ ] Download/deploy options

### Phase 5: Polish (2 weeks)
- [ ] Project save/load
- [ ] Version history
- [ ] Collaboration features
- [ ] Documentation & tutorials

---

## 11. Tech Stack

### Frontend
- **React** or **Vue 3** - UI framework
- **Monaco Editor** - Code editing (same as VS Code)
- **TailwindCSS** - Styling
- **WebSocket** - Live linting communication

### Backend
- **Go** - API server
- **gopls** - Go language server for linting
- **Docker** - Sandboxed builds
- **PostgreSQL** - Project storage
- **S3/MinIO** - Artifact storage

### Generated Projects
- **Go 1.22+** - Target runtime
- **statesync** - State synchronization
- **gorilla/websocket** - WebSocket server

---

## 12. Action Flow Editor (Visual Scripting)

### 12.1 Overview

A hybrid visual/code system where **Actions** (client messages) trigger **visual node graphs** that can call **custom Go code**, **built-in effects**, and **state modifications**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ACTION FLOW EDITOR (rete.js / vueflow)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   ACTION     â”‚      â”‚  CONDITION   â”‚  âœ“   â”‚   EFFECT     â”‚              â”‚
â”‚  â”‚  PlayCard    â”‚â”€â”€â”€â”€â”€â–¶â”‚ IsPlayerTurn â”‚â”€â”€â”€â”€â”€â–¶â”‚  RemoveCard  â”‚              â”‚
â”‚  â”‚              â”‚      â”‚              â”‚      â”‚  from: Hand  â”‚              â”‚
â”‚  â”‚ cardId: str  â”‚      â”‚              â”‚  âœ—   â”‚  cardId: $in â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                          â”‚          â”‚                      â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”      â–¼                      â”‚
â”‚                               â”‚    ERROR     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                               â”‚ "Not your    â”‚ â”‚   CUSTOM     â”‚            â”‚
â”‚                               â”‚  turn"       â”‚ â”‚  ValidateCardâ”‚â”€â”€â”€â”€â”       â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  Logic()     â”‚    â”‚       â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚                                                      â”‚             â”‚       â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚
â”‚                                         â–¼              â–¼     â”‚  EFFECT  â”‚ â”‚
â”‚                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ SpeedBuffâ”‚ â”‚
â”‚                                   â”‚  EFFECT  â”‚  â”‚  EVENT   â”‚ â”‚ duration â”‚ â”‚
â”‚                                   â”‚ AddScore â”‚  â”‚ CardPlyd â”‚ â”‚  : 10s   â”‚ â”‚
â”‚                                   â”‚ +10      â”‚  â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 Why Visual + Code Hybrid?

| Benefit | Description |
|---------|-------------|
| **Visibility** | See entire game flow at a glance |
| **Debugging** | Visually trace execution path, highlight active nodes |
| **No-code basics** | Simple games work with just drag & drop |
| **Code where needed** | Complex logic â†’ Custom Go nodes |
| **Reusability** | Effects, Conditions reusable across Actions |
| **Onboarding** | New team members understand flow instantly |

### 12.3 Node Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NODE CATEGORIES                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€ TRIGGERS (entry points) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
â”‚  â”‚  â”‚   ACTION    â”‚ â”‚   EVENT     â”‚ â”‚   TIMER     â”‚ â”‚  LIFECYCLE  â”‚      â”‚â”‚
â”‚  â”‚  â”‚ Client msg  â”‚ â”‚ Internal    â”‚ â”‚ Cron/Delay  â”‚ â”‚ OnJoin/Left â”‚      â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚ game event  â”‚ â”‚             â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â”‚ Inputs:     â”‚ â”‚             â”‚ â”‚ interval:   â”‚ â”‚ player: ID  â”‚      â”‚â”‚
â”‚  â”‚  â”‚ - playerId  â”‚ â”‚ eventType:  â”‚ â”‚ 1s/1m/etc   â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â”‚ - payload   â”‚ â”‚ CardPlayed  â”‚ â”‚             â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ CONDITIONS (branching) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
â”‚  â”‚  â”‚   Compare   â”‚ â”‚  Contains   â”‚ â”‚   Custom    â”‚ â”‚    Gate     â”‚      â”‚â”‚
â”‚  â”‚  â”‚   A op B    â”‚ â”‚  arr has X  â”‚ â”‚  Go func    â”‚ â”‚  Phase==X   â”‚      â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â”‚ ==, !=, <,  â”‚ â”‚ array: Hand â”‚ â”‚ func name:  â”‚ â”‚ allowedIn:  â”‚      â”‚â”‚
â”‚  â”‚  â”‚ >, <=, >=   â”‚ â”‚ item: $card â”‚ â”‚ ValidateXYZ â”‚ â”‚ [Play,Draw] â”‚      â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ EFFECTS (state mutations) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
â”‚  â”‚  â”‚  SetField   â”‚ â”‚ ArrayPush   â”‚ â”‚ ArrayRemove â”‚ â”‚ TimedEffect â”‚      â”‚â”‚
â”‚  â”‚  â”‚  X = Y      â”‚ â”‚ add to arr  â”‚ â”‚ remove from â”‚ â”‚ temporary   â”‚      â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â”‚ target:     â”‚ â”‚ array: Hand â”‚ â”‚ array: Deck â”‚ â”‚ effect:     â”‚      â”‚â”‚
â”‚  â”‚  â”‚ player.Scoreâ”‚ â”‚ item: $card â”‚ â”‚ where: ID=X â”‚ â”‚ SpeedBuff   â”‚      â”‚â”‚
â”‚  â”‚  â”‚ value: +10  â”‚ â”‚             â”‚ â”‚             â”‚ â”‚ duration:10sâ”‚      â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚â”‚
â”‚  â”‚  â”‚   Custom    â”‚ â”‚  Transfer   â”‚ â”‚   Shuffle   â”‚                       â”‚â”‚
â”‚  â”‚  â”‚  Go Effect  â”‚ â”‚ move item   â”‚ â”‚ randomize   â”‚                       â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                       â”‚â”‚
â”‚  â”‚  â”‚ func name:  â”‚ â”‚ from: Deck  â”‚ â”‚ array: Deck â”‚                       â”‚â”‚
â”‚  â”‚  â”‚ ApplyDamage â”‚ â”‚ to: Hand    â”‚ â”‚             â”‚                       â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ OUTPUTS (responses & events) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
â”‚  â”‚  â”‚   Success   â”‚ â”‚   Error     â”‚ â”‚ EmitEvent   â”‚ â”‚  Broadcast  â”‚      â”‚â”‚
â”‚  â”‚  â”‚  response   â”‚ â”‚  message    â”‚ â”‚ to clients  â”‚ â”‚ force sync  â”‚      â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â”‚ data: {...} â”‚ â”‚ code: 400   â”‚ â”‚ type: Toast â”‚ â”‚ debounce:   â”‚      â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚ msg: "..."  â”‚ â”‚ payload: {} â”‚ â”‚ 100ms       â”‚      â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ FLOW CONTROL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
â”‚  â”‚  â”‚   ForEach   â”‚ â”‚   Delay     â”‚ â”‚   Parallel  â”‚ â”‚   Switch    â”‚      â”‚â”‚
â”‚  â”‚  â”‚  loop array â”‚ â”‚  wait time  â”‚ â”‚  run both   â”‚ â”‚  multi-way  â”‚      â”‚â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚      â”‚â”‚
â”‚  â”‚  â”‚ array:      â”‚ â”‚ duration:   â”‚ â”‚ branches:   â”‚ â”‚ on: Phase   â”‚      â”‚â”‚
â”‚  â”‚  â”‚ game.Playersâ”‚ â”‚ 2s          â”‚ â”‚ [A, B]      â”‚ â”‚ cases: ...  â”‚      â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.4 Custom Go Node API

Users can write Go functions that appear as nodes in the visual editor:

```go
// conditions/validate_card.go
package conditions

import "game/flow"

// NodeInfo tells the editor how to display this node
var ValidateCardPlay = flow.Condition{
    Name:        "ValidateCardPlay",
    Description: "Check if player can play this card",
    Inputs: []flow.Port{
        {Name: "cardId", Type: "string"},
    },
    Outputs: []flow.Port{
        {Name: "card", Type: "Card"},  // passed to next node on success
    },
    Func: validateCardPlay,
}

func validateCardPlay(ctx *flow.Context) (bool, error) {
    player := ctx.GetPlayer()
    cardID := ctx.Input("cardId").(string)

    for _, card := range player.Hand {
        if card.ID == cardID && card.CanPlay(ctx.State().Phase) {
            ctx.SetOutput("card", card)
            return true, nil
        }
    }
    return false, nil
}
```

```go
// effects/apply_damage.go
package effects

import "game/flow"

var ApplyDamage = flow.Effect{
    Name:        "ApplyDamage",
    Description: "Deal damage to a player",
    Inputs: []flow.Port{
        {Name: "targetId", Type: "string"},
        {Name: "amount", Type: "int"},
    },
    Func: applyDamage,
}

func applyDamage(ctx *flow.Context) error {
    targetID := ctx.Input("targetId").(string)
    amount := ctx.Input("amount").(int)

    target := ctx.State().GetPlayer(targetID)
    target.Health -= amount

    if target.Health <= 0 {
        ctx.Emit("PlayerDefeated", map[string]any{"playerId": targetID})
    }

    return nil
}
```

### 12.5 Node Registration & Discovery

```go
// main.go or init
func init() {
    // Built-in nodes are auto-registered
    // Custom nodes registered here:
    flow.RegisterCondition(conditions.ValidateCardPlay)
    flow.RegisterCondition(conditions.IsPlayerTurn)
    flow.RegisterCondition(conditions.HasEnoughMana)

    flow.RegisterEffect(effects.ApplyDamage)
    flow.RegisterEffect(effects.DrawCards)
    flow.RegisterEffect(effects.ShuffleDeck)
}
```

The editor fetches available nodes via API:

```json
GET /api/nodes

{
  "conditions": [
    {
      "name": "ValidateCardPlay",
      "description": "Check if player can play this card",
      "inputs": [{"name": "cardId", "type": "string"}],
      "outputs": [{"name": "card", "type": "Card"}]
    }
  ],
  "effects": [
    {
      "name": "ApplyDamage",
      "description": "Deal damage to a player",
      "inputs": [
        {"name": "targetId", "type": "string"},
        {"name": "amount", "type": "int"}
      ]
    }
  ]
}
```

### 12.6 Graph Storage Format

```json
{
  "id": "play-card-action",
  "name": "PlayCard",
  "description": "Handle playing a card from hand",
  "trigger": {
    "type": "action",
    "name": "play-card",
    "inputs": ["cardId"]
  },
  "nodes": [
    {
      "id": "n1",
      "type": "condition",
      "name": "IsPlayerTurn",
      "position": {"x": 200, "y": 100}
    },
    {
      "id": "n2",
      "type": "condition",
      "name": "ValidateCardPlay",
      "position": {"x": 400, "y": 50},
      "inputs": {
        "cardId": "$trigger.cardId"
      }
    },
    {
      "id": "n3",
      "type": "effect",
      "name": "ArrayRemove",
      "position": {"x": 600, "y": 50},
      "inputs": {
        "array": "$player.Hand",
        "where": {"ID": "$n2.card.ID"}
      }
    },
    {
      "id": "n4",
      "type": "effect",
      "name": "TimedEffect",
      "position": {"x": 800, "y": 50},
      "inputs": {
        "effect": "CardPlayedBuff",
        "target": "$player.ID",
        "duration": "10s",
        "params": {"card": "$n2.card"}
      }
    },
    {
      "id": "err1",
      "type": "error",
      "position": {"x": 400, "y": 200},
      "inputs": {
        "code": 400,
        "message": "Not your turn"
      }
    }
  ],
  "edges": [
    {"from": "trigger", "to": "n1"},
    {"from": "n1", "to": "n2", "condition": "true"},
    {"from": "n1", "to": "err1", "condition": "false"},
    {"from": "n2", "to": "n3", "condition": "true"},
    {"from": "n3", "to": "n4"}
  ]
}
```

### 12.7 Graph to Go Code Generation

The visual graph compiles to optimized Go code:

```go
// Generated from "play-card-action" graph
func HandlePlayCard(ctx *flow.Context) error {
    cardID := ctx.Input("cardId").(string)

    // n1: IsPlayerTurn
    if ctx.State().CurrentPlayer != ctx.PlayerID() {
        return flow.Error(400, "Not your turn")
    }

    // n2: ValidateCardPlay
    var card *Card
    for _, c := range ctx.Player().Hand {
        if c.ID == cardID && c.CanPlay(ctx.State().Phase) {
            card = &c
            break
        }
    }
    if card == nil {
        return flow.Error(400, "Invalid card")
    }

    // n3: ArrayRemove from Hand
    ctx.Player().Hand = slices.DeleteFunc(ctx.Player().Hand, func(c Card) bool {
        return c.ID == card.ID
    })

    // n4: TimedEffect
    ctx.StartEffect("CardPlayedBuff", flow.EffectParams{
        Target:   ctx.PlayerID(),
        Duration: 10 * time.Second,
        Params:   map[string]any{"card": card},
    })

    return nil
}
```

### 12.8 Visual Debugging

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACTION FLOW: PlayCard                              [â–¶ Debug Mode] [Logs]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Execution #1247 | Player: alice | Time: 12:34:56                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   ACTION     â”‚      â”‚  CONDITION   â”‚      â”‚   EFFECT     â”‚              â”‚
â”‚  â”‚  PlayCard    â”‚â”€â”€â”€â”€â”€â–¶â”‚ IsPlayerTurn â”‚â”€â”€â”€â”€â”€â–¶â”‚  RemoveCard  â”‚â”€â”€â”€â”€â”€â”€â–¶ ...   â”‚
â”‚  â”‚  âœ“ 0.1ms     â”‚      â”‚  âœ“ 0.2ms     â”‚      â”‚  âœ“ 0.5ms     â”‚              â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â• â”‚      â”‚  â•â•â•â•â•â•â•â•â•â•â• â”‚      â”‚  â•â•â•â•â•â•â•â•â•â•â• â”‚              â”‚
â”‚  â”‚ cardId: "c7" â”‚      â”‚ result: true â”‚      â”‚ removed: c7  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚        â”‚                     â”‚                     â”‚                        â”‚
â”‚        â–¼                     â–¼                     â–¼                        â”‚
â”‚  â”Œâ”€ Input â”€â”€â”€â”€â”€â”€â”     â”Œâ”€ State â”€â”€â”€â”€â”€â”€â”     â”Œâ”€ State â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ cardId: "c7" â”‚     â”‚ currentPlayerâ”‚     â”‚ hand.length: â”‚               â”‚
â”‚  â”‚ player: aliceâ”‚     â”‚ : "alice" âœ“  â”‚     â”‚ 6 â†’ 5        â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Total: 2.3ms | Nodes: 5 | Effects started: 1 | Events emitted: 1         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.9 Integration with Effects System

The visual editor works seamlessly with the statesync Effect system:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EFFECTS LIBRARY                                          [+ Create Effect] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€ SpeedBuff â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Type: TimedEffect                                                     â”‚  â”‚
â”‚  â”‚ Duration: configurable                                                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚ Parameters:                                                           â”‚  â”‚
â”‚  â”‚   - target: PlayerID (required)                                       â”‚  â”‚
â”‚  â”‚   - amount: int (default: 10)                                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚ OnApply:   player.Speed += amount                                     â”‚  â”‚
â”‚  â”‚ OnExpire:  player.Speed -= amount                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚ [Edit Code]  [View Usages: 3 flows]                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Shield â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Type: TimedEffect                                                     â”‚  â”‚
â”‚  â”‚ ...                                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 13. Open Questions

1. **Pricing model?** Free tier with limits? Pay per build? Self-hosted option?

2. **Template library?** Pre-built game templates (card game, GPS hunt, etc.)?

3. **Client SDK generation?** Generate TypeScript/Dart client from schema?

4. **Collaboration?** Real-time multi-user editing?

5. **CI/CD integration?** GitHub Actions workflow generation?

6. **Custom hosting?** One-click deploy to cloud providers?

---

*Document Version: 2.0*
*Last Updated: 2024*
*Vision: Web-based multiplayer game builder platform*
